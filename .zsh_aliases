# Tail Laravel logs with colors
alias laralog="tail -f -n 450 storage/logs/laravel*.log | grep -i -E \"^\[\d{4}\-\d{2}\-\d{2} \d{2}:\d{2}:\d{2}\]|Next [\w\W]+?\:\" --color"

# Git log with short & pretty
alias gl="git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit"

# WIP
alias wip="git add . && git commit -m 'wip'"

# Rollback everything
alias nah='git reset --hard;git clean -df'

# Clear
alias c="clear"

# Yes, It's for Laravel
alias art='php artisan'
alias a='php artisan'
alias tinker='php artisan tinker'
alias migarte='php artisan migrate'
alias mfs='php artisan migrate:fresh'
alias serve='artisan serve'

# Symfony
alias sf='bin/console'

# Composer
alias comp='composer'

# PHPUnit
alias phpunit='vendor/bin/phpunit'

# Copy SSH
alias copyssh="pbcopy < $HOME/.ssh/id_ed.pub"

# ls with lolcat
alias l='ls | lolcat' 
alias la='ls -la | lolcat'

# Remove all files .DS_Store
function rmds() {
    find . -name '.DS_Store' -type f -delete
}

function archive_commits() {
    git archive -o $1 HEAD $(git diff --name-only $2 HEAD)
}

function phpv() {
    valet stop
    brew unlink php@7.3 php
    brew link --force --overwrite $1
    brew services start $1
    composer global update
    rm -f ~/.config/valet/valet.sock
    valet install
}

alias weather='curl -s wttr.in | sed -n "1,7p"'

alias mysqladm='mysql -u root'

function db {
    if [ "$1" = "refresh" ]; then
        mysql -uroot -e "drop database $2; create database $2"
    elif [ "$1" = "create" ]; then
        mysql -uroot -e "create database $2"
    elif [ "$1" = "drop" ]; then
        mysql -uroot -e "drop database $2"
    fi
}

function scheduler () {
    while :; do
        php artisan schedule:run
	echo "Sleeping 60 seconds..."
        sleep 60
    done
}

# What's the fuck are u doing?
alias docker-composer="docker-compose"

alias reloaddns="dscacheutil -flushcache && sudo killall -HUP mDNSResponder"

